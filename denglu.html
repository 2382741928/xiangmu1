<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="denglu.css">
    <link rel="stylesheet" href="public.css">
</head>

<body>
    <script type="text/javascript" src="gm/jquery.js"> </script>
    <div id="top">
        <div class="top">
            <a href="http://localhost/zhangjian/shouye.html"><img src="gm/zhuce.png" alt=""></a>
            <p>我还未注册，现在就<a href="http://localhost/zhangjian/zhuce.html">注册</a></p>
        </div>
        <div id="form">
            <input type="text" id="username" value="请输入姓名"><br>
            <input type="text" id="password" value="请输入密码"><br>
            <input type="submit" id="sub" value="登录">
        </div>

    </div>
</body>
<script>
    if (window.localStorage.userArr) {
        //判断是否存在        
        var array = JSON.parse(window.localStorage.userArr);
    } else {
        array = []; //创建一个新数组    
    }

    $("#sub").click(function () {
        var username = $("#username").val();
        var password = $("#password").val();
        var flag = false;
        var index = 0;
        //遍历数组进行匹配        
        for (var i = 0; i < array.length; i++) {
            //判断是否有相同账号            
            if (username == array[i].username) { //有这个账号                
                flag = true;
                index = i;
            }
        }
        if (flag) { //如果存在            
            if (password == array[index].password) {
                alert("登录成功");
                var yonghu = $("#username");
                localStorage.name = yonghu.val();
                console.log(localStorage.name);
                window.location.href = "http://localhost/zhangjian/shouye.html";
            } else {
                alert("密码错误");
            }
        } else { //账号不存在或输入错误            
            $erroinfo.show().find("b").html("用户不存在，请先注册");

        }

    })
</script>


</body>

</html>